{"ast":null,"code":"import React,{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import ActivityIndicator from\"react-native-web/dist/exports/ActivityIndicator\";import FlatList from\"react-native-web/dist/exports/FlatList\";import TouchableOpacity from\"react-native-web/dist/exports/TouchableOpacity\";import{Avatar,Icon}from\"react-native-elements\";import theme from\"../../Theme.json\";import{fetchUsers}from\"../../actions/usersActions\";import _ from\"lodash\";var Item=function Item(_ref){var _item$avatar;var item=_ref.item,navigation=_ref.navigation;return React.createElement(TouchableOpacity,{onPress:function onPress(){navigation.navigate(\"Read\",{item:item});}},React.createElement(View,{style:{paddingTop:8,paddingHorizontal:20,marginVertical:4,marginHorizontal:0,borderBottomWidth:1,borderBottomColor:theme.colors.grey4,paddingVertical:12,flexDirection:\"row\"}},React.createElement(View,{style:{alignContent:\"center\",justifyContent:\"center\",alignItems:\"center\",marginRight:12}},(item==null?void 0:item.avatar)?React.createElement(Avatar,{source:{uri:\"https://siee-gate.herokuapp.com/api/files/avatar/\"+(item==null?void 0:(_item$avatar=item.avatar)==null?void 0:_item$avatar.filename)},size:\"medium\"}):React.createElement(Avatar,{size:\"medium\",title:item==null?void 0:item.firstname[0].concat(item==null?void 0:item.lastname[0]).toUpperCase()})),React.createElement(View,null,React.createElement(Text,{style:{textAlignVertical:\"bottom\",fontWeight:\"bold\",fontSize:16}},_.capitalize(item==null?void 0:item.firstname),\" \",_.capitalize(item==null?void 0:item.lastname)),React.createElement(View,{style:{flexDirection:\"row\",flex:1,alignItems:\"center\"}},React.createElement(Icon,{name:\"account-card-details\",size:20}),React.createElement(Text,{style:{textAlignVertical:\"bottom\",marginStart:8}},item==null?void 0:item.jobTitle,\" chez \",item==null?void 0:item.organisation)),React.createElement(View,{style:{flexDirection:\"row\",flex:1,alignItems:\"center\"}},React.createElement(Icon,{name:\"school\",size:20}),React.createElement(Text,{style:{textAlignVertical:\"bottom\",marginStart:8}},\"SIEE promotion \",item==null?void 0:item.promo)))));};var PeopleScreen=function PeopleScreen(_ref2){var _users$users;var navigation=_ref2.navigation;var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state;}),users=_useSelector.users,auth=_useSelector.auth;useEffect(function(){function fetchData(){dispatch(fetchUsers());}fetchData();},[]);return React.createElement(View,{style:{flex:1}},users.isLoaded?React.createElement(FlatList,{style:{borderRadius:0,shadowOffset:{width:10,height:10},shadowColor:\"black\",shadowOpacity:0.3,elevation:2,backgroundColor:\"white\"},data:(_users$users=users.users)==null?void 0:_users$users.filter(function(user){return user._id!==auth.user._id;}),renderItem:function renderItem(_ref3){var item=_ref3.item;return React.createElement(Item,{item:item,navigation:navigation});},keyExtractor:function keyExtractor(item){return item==null?void 0:item._id;}}):React.createElement(View,{style:{flex:1,alignContent:\"center\",justifyContent:\"center\"}},React.createElement(ActivityIndicator,{size:\"large\"})));};export default PeopleScreen;","map":{"version":3,"sources":["/home/gaetan/Documents/GATE/app/client/src/components/People/PeopleListScreen.js"],"names":["React","useEffect","useDispatch","useSelector","Avatar","Icon","theme","fetchUsers","_","Item","item","navigation","navigate","paddingTop","paddingHorizontal","marginVertical","marginHorizontal","borderBottomWidth","borderBottomColor","colors","grey4","paddingVertical","flexDirection","alignContent","justifyContent","alignItems","marginRight","avatar","uri","filename","firstname","concat","lastname","toUpperCase","textAlignVertical","fontWeight","fontSize","capitalize","flex","marginStart","jobTitle","organisation","promo","PeopleScreen","dispatch","state","users","auth","fetchData","isLoaded","borderRadius","shadowOffset","width","height","shadowColor","shadowOpacity","elevation","backgroundColor","filter","user","_id"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  View,\n  Text,\n  ActivityIndicator,\n  FlatList,\n  TouchableOpacity,\n} from \"react-native\";\nimport { Avatar, Icon } from \"react-native-elements\";\nimport theme from \"../../Theme.json\";\nimport { fetchUsers } from \"../../actions/usersActions\";\nimport _ from \"lodash\";\n\nconst Item = ({ item, navigation }) => {\n  return (\n    <TouchableOpacity\n      onPress={() => {\n        navigation.navigate(\"Read\", {\n          item,\n        });\n      }}\n    >\n      <View\n        style={{\n          paddingTop: 8,\n          paddingHorizontal: 20,\n          marginVertical: 4,\n          marginHorizontal: 0,\n          borderBottomWidth: 1,\n          borderBottomColor: theme.colors.grey4,\n          paddingVertical: 12,\n          flexDirection: \"row\",\n        }}\n      >\n        <View\n          style={{\n            alignContent: \"center\",\n            justifyContent: \"center\",\n            alignItems: \"center\",\n            marginRight: 12,\n          }}\n        >\n          {item?.avatar ? (\n            <Avatar\n              source={{\n                uri: `https://siee-gate.herokuapp.com/api/files/avatar/${item?.avatar?.filename}`,\n              }}\n              size=\"medium\"\n            />\n          ) : (\n            <Avatar\n              size=\"medium\"\n              title={item?.firstname[0].concat(item?.lastname[0]).toUpperCase()}\n            />\n          )}\n        </View>\n        <View>\n          <Text\n            style={{\n              textAlignVertical: \"bottom\",\n              fontWeight: \"bold\",\n              fontSize: 16,\n            }}\n          >\n            {_.capitalize(item?.firstname)} {_.capitalize(item?.lastname)}\n          </Text>\n          <View style={{ flexDirection: \"row\", flex: 1, alignItems: \"center\" }}>\n            <Icon name=\"account-card-details\" size={20} />\n            <Text style={{ textAlignVertical: \"bottom\", marginStart: 8 }}>\n              {item?.jobTitle} chez {item?.organisation}\n            </Text>\n          </View>\n          <View style={{ flexDirection: \"row\", flex: 1, alignItems: \"center\" }}>\n            <Icon name=\"school\" size={20} />\n            <Text style={{ textAlignVertical: \"bottom\", marginStart: 8 }}>\n              SIEE promotion {item?.promo}\n            </Text>\n          </View>\n        </View>\n      </View>\n    </TouchableOpacity>\n  );\n};\n\nconst PeopleScreen = ({ navigation }) => {\n  const dispatch = useDispatch();\n  const { users, auth } = useSelector((state) => state);\n  useEffect(() => {\n    function fetchData() {\n      dispatch(fetchUsers());\n    }\n    fetchData();\n  }, []);\n\n  return (\n    <View style={{ flex: 1 }}>\n      {users.isLoaded ? (\n        <FlatList\n          style={{\n            borderRadius: 0,\n            shadowOffset: { width: 10, height: 10 },\n            shadowColor: \"black\",\n            shadowOpacity: 0.3,\n            elevation: 2,\n            backgroundColor: \"white\",\n          }}\n          data={users.users?.filter((user) => user._id !== auth.user._id)}\n          renderItem={({ item }) => (\n            <Item item={item} navigation={navigation} />\n          )}\n          keyExtractor={(item) => item?._id}\n        />\n      ) : (\n        <View\n          style={{ flex: 1, alignContent: \"center\", justifyContent: \"center\" }}\n        >\n          <ActivityIndicator size=\"large\" />\n        </View>\n      )}\n    </View>\n  );\n};\n\nexport default PeopleScreen;\n"]},"metadata":{},"sourceType":"module"}