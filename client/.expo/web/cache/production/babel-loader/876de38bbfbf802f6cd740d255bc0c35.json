{"ast":null,"code":"import _toConsumableArray from\"@babel/runtime/helpers/toConsumableArray\";import _defineProperty from\"@babel/runtime/helpers/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var initialState={isLoggingIn:false,isLoggingOut:false,isFetchingUserInfo:false,isLoggedIn:false,loggedInAt:null,user:null,userInfoUpdatedAt:null,userInfoError:null,authError:null,logOutError:null,isSigningUp:false,token:null,userInfoUpdatedAt:null,signUpError:null,isDeletingAccount:false};export default function(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case\"REQUEST_AUTH_TOKEN\":return _objectSpread({},state,{},action.data);case\"REQUEST_SIGN_UP\":return _objectSpread({},state,{isSigningUp:true,signUpError:null});case\"REQUEST_SIGN_UP\":return _objectSpread({},state,{isSigningUp:true,signUpError:null});case\"REQUEST_LOG_IN\":return _objectSpread({},state,{isLoggingIn:true});case\"REQUEST_LOG_OUT\":return _objectSpread({},state,{isloggingOut:true});case\"REQUEST_UPDATE_USER\":return _objectSpread({},state,{isUpdatingUser:true});case\"REQUEST_DELETE_ACCOUNT\":return _objectSpread({},state,{isDeletingAccount:true});case\"REQUEST_UPDATE_PASSWORD\":return _objectSpread({},state,{isUpdatingPassword:true});case\"REQUEST_MY_JOBS\":return _objectSpread({},state,{isFetching:true});case\"REQUEST_UPDATE_JOB\":return _objectSpread({},state,{isUpdatingJob:true});case\"REQUEST_CREATE_JOB\":return state;case\"RECEIVE_CONVERSATION\":return _objectSpread({},state,{user:_objectSpread({},state.user,{privateConversations:[].concat(_toConsumableArray(state.user.privateConversations),[{conversation_id:action.conversation._id,interlocutor_id:action.message.sender}])})});case\"PRIVATE_CONVERSATION_ACK\":return _objectSpread({},state,{user:_objectSpread({},state.user,{privateConversations:[].concat(_toConsumableArray(state.user.privateConversations),[{conversation_id:action.conversation._id,interlocutor_id:action.message.recipient}])})});case\"REQUEST_VERIFY_TOKEN:SUCCESS\":return _objectSpread({},state,{tokenVerifiedAt:action.receivedAt});case\"REQUEST_LOG_IN:SUCCESS\":return _objectSpread({},state,{isLoggingIn:false,isLoggedIn:true,loggedInAt:action.receivedAt,userInfoUpdatedAt:action.receivedAt,logInError:null},action.data);case\"REQUEST_SIGN_UP:SUCCESS\":return _objectSpread({},state,{isSigningUp:false,user:action.user,token:action.token,loggedInAt:action.receivedAt,isLoggedIn:true,userInfoUpdatedAt:action.receivedAt,signUpError:null},action.data);case\"REQUEST_DELETE_ACCOUNT:SUCCESS\":case\"REQUEST_LOG_OUT:SUCCESS\":return initialState;case\"REQUEST_UPDATE_USER:SUCCESS\":return _objectSpread({},state,{updateUserError:null,isUpdatingUser:false,userInfoUpdatedAt:action.receivedAt},action.data);case\"REQUEST_MY_JOBS:SUCCESS\":return _objectSpread({},state,{isFetching:false,fetchMyJobsError:null,lastUpdatedAt:action.receivedAt,isLoaded:true},action.data);case\"REQUEST_UPLOAD_FILE:SUCCESS\":return _objectSpread({},state,{},action.data);case\"REQUEST_UPDATE_PASSWORD:SUCCESS\":return _objectSpread({},state,{updatePasswordError:null});case\"REQUEST_UPDATE_JOB:SUCCESS\":return _objectSpread({},state,{user:_objectSpread({},state.user,{jobs:action.data.jobs}),isUpdatingJob:false});case\"REQUEST_CREATE_JOB:SUCCESS\":return _objectSpread({},state,{user:_objectSpread({},state.user,{jobs:[action.data.job].concat(_toConsumableArray(state.user.jobs))})});case\"REQUEST_VERIFY_TOKEN:ERROR\":return initialState;case\"REQUEST_MY_JOBS:ERROR\":return _objectSpread({},state,{isFetching:false,lastUpdatedAt:action.receivedAt,isLoaded:true,fetchMyJobsError:\"Vos offres d'emploi n'ont pas pu être récupérées, essayez de nouveau.\"});case\"REQUEST_UPDATE_USER:ERROR\":return _objectSpread({},state,{isUpdatingUser:false,updateUserError:\"Cela n'a pas marché. Peut-être le mot de passe était-il incorrect.\"});case\"REQUEST_UPDATE_PASSWORD:ERROR\":return _objectSpread({},state,{isUpdatingPassword:false,updatePasswordError:\"Cela n'a pas marché. Peut-être le mot de passe était-il incorrect.\"});case\"REQUEST_LOG_IN:ERROR\":return _objectSpread({},state,{logInError:\"Cela n'a pas marché. Peut-être le mot de passe était-il incorrect.\",isLoggingIn:false});case\"REQUEST_SIGN_UP:ERROR\":return _objectSpread({},state,{isSigningUp:false,signUpError:\"Cela n'a pas marché, essayez un autre email.\"});case\"REQUEST_UPDATE_JOB:ERROR\":return _objectSpread({},state,{},action.state,{isUpdatingJob:false});case\"REQUEST_CREATE_JOB:ERROR\":return _objectSpread({},state,{},action.state);default:return state;}}","map":{"version":3,"sources":["/home/gaetan/Documents/GATE/app/client/src/store/reducers/authReducer.js"],"names":["initialState","isLoggingIn","isLoggingOut","isFetchingUserInfo","isLoggedIn","loggedInAt","user","userInfoUpdatedAt","userInfoError","authError","logOutError","isSigningUp","token","signUpError","isDeletingAccount","state","action","type","data","isloggingOut","isUpdatingUser","isUpdatingPassword","isFetching","isUpdatingJob","privateConversations","conversation_id","conversation","_id","interlocutor_id","message","sender","recipient","tokenVerifiedAt","receivedAt","logInError","updateUserError","fetchMyJobsError","lastUpdatedAt","isLoaded","updatePasswordError","jobs","job"],"mappings":"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","sourcesContent":["const initialState = {\n  isLoggingIn: false,\n  isLoggingOut: false,\n  isFetchingUserInfo: false,\n  isLoggedIn: false,\n  loggedInAt: null,\n  user: null,\n  userInfoUpdatedAt: null,\n  userInfoError: null,\n  authError: null,\n  logOutError: null,\n  isSigningUp: false,\n  token: null,\n  userInfoUpdatedAt: null,\n  signUpError: null,\n  isDeletingAccount: false,\n};\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case \"REQUEST_AUTH_TOKEN\":\n      return {\n        ...state,\n        ...action.data,\n      };\n    case \"REQUEST_SIGN_UP\":\n      return {\n        ...state,\n        isSigningUp: true,\n        signUpError: null,\n      };\n    case \"REQUEST_SIGN_UP\":\n      return {\n        ...state,\n        isSigningUp: true,\n        signUpError: null,\n      };\n    case \"REQUEST_LOG_IN\":\n      return {\n        ...state,\n        isLoggingIn: true,\n      };\n    case \"REQUEST_LOG_OUT\":\n      return {\n        ...state,\n        isloggingOut: true,\n      };\n    case \"REQUEST_UPDATE_USER\":\n      return {\n        ...state,\n        isUpdatingUser: true,\n      };\n    case \"REQUEST_DELETE_ACCOUNT\":\n      return {\n        ...state,\n        isDeletingAccount: true,\n      };\n    case \"REQUEST_UPDATE_PASSWORD\":\n      return {\n        ...state,\n        isUpdatingPassword: true,\n      };\n    case \"REQUEST_MY_JOBS\":\n      return {\n        ...state,\n        isFetching: true,\n      };\n    case \"REQUEST_UPDATE_JOB\":\n      return {\n        ...state,\n        isUpdatingJob: true,\n      };\n    case \"REQUEST_CREATE_JOB\":\n      return state;\n    case \"RECEIVE_CONVERSATION\":\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          privateConversations: [\n            ...state.user.privateConversations,\n            {\n              conversation_id: action.conversation._id,\n              interlocutor_id: action.message.sender,\n            },\n          ],\n        },\n      };\n    case \"PRIVATE_CONVERSATION_ACK\":\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          privateConversations: [\n            ...state.user.privateConversations,\n            {\n              conversation_id: action.conversation._id,\n              interlocutor_id: action.message.recipient,\n            },\n          ],\n        },\n      };\n\n    // SUCCESS\n    case \"REQUEST_VERIFY_TOKEN:SUCCESS\":\n      return {\n        ...state,\n        tokenVerifiedAt: action.receivedAt,\n      };\n    case \"REQUEST_LOG_IN:SUCCESS\":\n      return {\n        ...state,\n        isLoggingIn: false,\n        isLoggedIn: true,\n        loggedInAt: action.receivedAt,\n        userInfoUpdatedAt: action.receivedAt,\n        logInError: null,\n        ...action.data,\n      };\n    case \"REQUEST_SIGN_UP:SUCCESS\":\n      return {\n        ...state,\n        isSigningUp: false,\n        user: action.user,\n        token: action.token,\n        loggedInAt: action.receivedAt,\n        isLoggedIn: true,\n        userInfoUpdatedAt: action.receivedAt,\n        signUpError: null,\n        ...action.data,\n      };\n    case \"REQUEST_DELETE_ACCOUNT:SUCCESS\":\n    case \"REQUEST_LOG_OUT:SUCCESS\":\n      return initialState;\n    case \"REQUEST_UPDATE_USER:SUCCESS\":\n      return {\n        ...state,\n        updateUserError: null,\n        isUpdatingUser: false,\n        userInfoUpdatedAt: action.receivedAt,\n        ...action.data,\n      };\n    case \"REQUEST_MY_JOBS:SUCCESS\":\n      return {\n        ...state,\n        isFetching: false,\n        fetchMyJobsError: null,\n        lastUpdatedAt: action.receivedAt,\n        isLoaded: true,\n        ...action.data,\n      };\n    case \"REQUEST_UPLOAD_FILE:SUCCESS\":\n      return {\n        ...state,\n        ...action.data,\n      };\n    case \"REQUEST_UPDATE_PASSWORD:SUCCESS\":\n      return { ...state, updatePasswordError: null };\n    case \"REQUEST_UPDATE_JOB:SUCCESS\":\n      return {\n        ...state,\n        user: { ...state.user, jobs: action.data.jobs },\n        isUpdatingJob: false,\n      };\n    case \"REQUEST_CREATE_JOB:SUCCESS\":\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          jobs: [action.data.job, ...state.user.jobs],\n        },\n      };\n\n    // ERRORS\n\n    case \"REQUEST_VERIFY_TOKEN:ERROR\":\n      return initialState;\n    case \"REQUEST_MY_JOBS:ERROR\":\n      return {\n        ...state,\n        isFetching: false,\n        lastUpdatedAt: action.receivedAt,\n        isLoaded: true,\n        fetchMyJobsError:\n          \"Vos offres d'emploi n'ont pas pu être récupérées, essayez de nouveau.\",\n      };\n    case \"REQUEST_UPDATE_USER:ERROR\":\n      return {\n        ...state,\n        isUpdatingUser: false,\n        updateUserError:\n          \"Cela n'a pas marché. Peut-être le mot de passe était-il incorrect.\",\n      };\n    case \"REQUEST_UPDATE_PASSWORD:ERROR\":\n      return {\n        ...state,\n        isUpdatingPassword: false,\n        updatePasswordError:\n          \"Cela n'a pas marché. Peut-être le mot de passe était-il incorrect.\",\n      };\n    case \"REQUEST_LOG_IN:ERROR\":\n      return {\n        ...state,\n        logInError:\n          \"Cela n'a pas marché. Peut-être le mot de passe était-il incorrect.\",\n        isLoggingIn: false,\n      };\n    case \"REQUEST_SIGN_UP:ERROR\":\n      return {\n        ...state,\n        isSigningUp: false,\n        signUpError: \"Cela n'a pas marché, essayez un autre email.\",\n      };\n    case \"REQUEST_UPDATE_JOB:ERROR\":\n      return {\n        ...state,\n        ...action.state,\n        isUpdatingJob: false,\n      };\n    case \"REQUEST_CREATE_JOB:ERROR\":\n      return {\n        ...state,\n        ...action.state,\n      };\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}